<!DOCTYPE html>
<html>
<head>
    <title>Time Score</title>
    <link href="assets/site.css" rel="stylesheet" />
    <meta name="viewport" content="width=device-width" />
</head>
<body>

    <time></time>
    <p>Time score: <span id="score"></span></p>

    <ul id="rules"></ul>

    <script src="assets/timescore.js"></script>
    <script>
        var time = document.querySelector("time"),
            score = document.getElementById("score"),
            rules = document.getElementById("rules"),
            ts = new TimeScore();

        function display() {
            var result = ts.getScore(new Date());
            //var result = ts.getScore(new Date(2015, 12, 31, 9, 9));

            time.innerHTML = result.time;
            score.innerHTML = result.score.points;

            var lis = rules.getElementsByTagName("li");

            for (var i = 0; i < lis.length; i++) {
                li = lis[i];
                
                if (result.score.points > 0 && li.innerHTML.lastIndexOf(result.score.rule) > -1) {
                    li.classList.add("active");
                }
                else {
                    li.classList.remove("active");
                }
            }
        }

        (function showRules() {
            for (var name in ts.rules) {
                var rule = ts.rules[name];
                var li = document.createElement("li");
                li.innerHTML = rule.points + " points - " + rule.rule;
                li.id = name;
                rules.appendChild(li);
            }
        })();

        display();

        setInterval(function () {
            display();

        }, 1000);
    </script>
</body>
</html>