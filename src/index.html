<!DOCTYPE html>
<html>
<head>
    <title>Time Score</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="description" content="TimeScore - because not all time is equal" />
    <style>
        body {
            font: 30px/1.5 georgia;
            text-align: center;
        }

        time {
            font-size: 3em;
        }

        #score {
            font-weight: bold;
        }

        ul {
            text-align: left;
            list-style: none;
            padding: 0;
            font-size: .5em;
            margin: 0 auto;
            display: inline-block;
            color: #999;
        }

            ul .active {
                color: #000;
            }
    </style>

    <link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/favicon/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/favicon/manifest.json">
    <link rel="shortcut icon" href="/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#00aba9">
    <meta name="msapplication-TileImage" content="/favicon/mstile-144x144.png">
    <meta name="msapplication-config" content="/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
</head>
<body>

    <time></time>
    <p>Time score: <span id="score"></span></p>

    <ul id="rules" role="list"></ul>

    <script src="assets/timescore.js"></script>
    <script>
        (function () {
            var time = document.querySelector("time"),
                score = document.getElementById("score"),
                rules = document.getElementById("rules"),
                ts = new TimeScore();

            function display() {
                //var result = ts.getScore(new Date());
                var result = ts.getScore(new Date(2015, 12, 31, 9, 9));

                time.innerHTML = result.time;
                score.innerHTML = result.score.points;

                var lis = rules.getElementsByTagName("li");

                for (var i = 0; i < lis.length; i++) {
                    li = lis[i];

                    if (result.score.points > 0 && li.innerHTML.lastIndexOf(result.score.rule) > -1) {
                        li.classList.add("active");
                    }
                    else {
                        li.classList.remove("active");
                    }
                }
            }

            function showRules() {
                for (var name in ts.rules) {
                    var rule = ts.rules[name];
                    var li = document.createElement("li");
                    li.innerHTML = rule.points + " points - " + rule.rule;
                    li.id = name;
                    rules.appendChild(li);
                }
            };

            showRules();
            display();

            setInterval(function () {
                display();

            }, 60 * 1000); // 1 minute
        })();
    </script>
</body>
</html>